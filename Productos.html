<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8"> <!-- Codificación de caracteres -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Hacerlo responsive -->
    <meta name="description" content="Productos de Mercazona"> <!-- Descripción de la página -->
    <meta name="keywords" content="Mercazona, productos, sandia, carne, pescado, vegetales, sepia, orden, solomillo"> <!-- Palabras clave para SEO -->
    <meta name="author" content="Arnau González Nieto"> <!-- Autor de la página -->
    
    <meta property="og:title" content="Mercazona"> <!-- Título para redes sociales -->
    <meta property="og:description" content="Productos de Mercazona"> <!-- Descripción para redes sociales -->
    <meta property="og:type" content="tienda online"> <!-- Tipo de contenido -->

    <meta name="twitter:card" content="summary_large_image"> <!-- Tarjeta grande para Twitter -->
    <meta name="twitter:title" content="Productos de Mercazona"> <!-- Título para Twitter -->
    <meta name="twitter:description" content="Página de productos en Mercazona, todas las ofertas y de más! "> <!-- Descripción para Twitter -->
    <title>Mercazona</title> <!-- Título -->
    <link rel="stylesheet" href="Productos.css"> <!-- Estilos -->
    <link rel="icon" href="imagenes/logo.png" type="image/png"> <!-- Favicon -->
</head>
<body>

    <!-- Header -->
    <header class="header">
        
        <nav class="nav">
            <!-- Sección izquierda -->
            <div class="nav-left">
                <h1>Mercazona</h1> <!-- Título izquierda -->
                <a href="index.html" target="_blank"> <!-- Logo izquierda con link inicio --> 
                    <img src="imagenes/logo.png" alt="logo">
                </a>
            </div>
    
            <!-- Sección derecha -->
            <div class="nav-right">
                <a href="index.html">Inicio</a> <!-- Redirige a Inicio -->
                <a href="sobre_nosotros.html">Sobre Nosotros</a> <!-- Redirige a Sobre Nosotros -->
                <a href="Contacto.html">Contacto</a> <!-- Redirige a Contacto -->
                <a href="Carrito.html">Carrito</a> 
            </div>
            
        </nav>
    </header>

    <div class="botones">
        <button onclick="ordenarAlfabeticamente()">Ordenar Alfabéticamente</button> <!--ordenar alfabeticamente-->
        <button onclick="ordenarPorCategoria()">Ordenar por Categoría</button> <!--ordenar por categoria-->
    </div>
    <!-- Sección de Productos -->
    <div class="catalogo"> <!-- Contenedor principal del catálogo de productos -->
        <div class="producto" data-categoria="carne" data-price="15.90" data-nombre="Solomillo" data-imagen="imagenes/solomillo.jpeg"> <!-- Producto 1: Solomillo -->
            <a href="producto1.html"> <!-- Esto todavía no funciona -->
                <div class="imagen-container"> <!-- Contenedor de la imagen del producto -->
                    <img src="imagenes/solomillo.jpeg" alt="Producto 1"> <!-- Imagen del producto con descripción alternativa -->
                </div>
                <h3>Solomillo</h3> <!-- Nombre del producto -->
                <p>Solomillo tierno de ternera</p> <!-- Descripción breve del producto -->
                <div class="precio">15,90 €/kg</div> <!-- Precio del producto -->
            </a>
            <div class="cantidad"> <!-- Contenedor para seleccionar cantidad -->
                <label for="cantidad1">Peso:</label> <!-- Etiqueta para el campo de cantidad -->
                <input type="number" id="cantidad1" name="cantidad1" min="1" value="1"> <!-- Campo para introducir el peso deseado -->
            </div>
            <button onclick="añadirAlCarrito(this)">Añadir al carrito</button><!-- Botón para añadir el producto al carrito -->
        </div>

<!-- Se repite toda la estructura con diferentes productos -->

        <div class="producto" data-categoria= "vegetales" data-nombre="Patatas" data-price="10.00" data-imagen="imagenes/patatas.jpeg">
            <a href="producto2.html">
                <div class="imagen-container">
                    <img src="imagenes/patatas.jpeg" alt="Producto 2">
                </div>
                <h3>Patatas</h3>
                <p>Saco de patatas 5 kg</p>
                <div class="precio">10 €/bolsa</div>
            </a>
            <div class="cantidad">
                <label for="cantidad2">Unidades:</label>
                <input type="number" id="cantidad2" name="cantidad2" min="1" value="1">
            </div>
            <button onclick="añadirAlCarrito(this)">Añadir al carrito</button>
        </div>

<!-- Se repite toda la estructura con diferentes productos -->

        <div class="producto" data-categoria="pescado" data-nombre= "Gulas" data-price="5.00" data-imagen="imagenes/gulas.jpeg">
            <a href="producto3.html">
                <div class="imagen-container">
                    <img src="imagenes/gulas.jpeg" alt="Producto 3">
                </div>
                <h3>Gulas</h3>
                <p>Gula del Norte</p>
                <div class="precio">5 €/paquete</div>
            </a>
            <div class="cantidad">
                <label for="cantidad3">Unidades:</label>
                <input type="number" id="cantidad3" name="cantidad3" min="1" value="1">
            </div>
            <button onclick="añadirAlCarrito(this)">Añadir al carrito</button>
        </div>

<!-- Se repite toda la estructura con diferentes productos -->

        <div class="producto" data-categoria="carne" data-nombre="Morcilla" data-price="6.00" data-imagen="imagenes/morcilla.jpeg">
            <a href="producto4.html">
                <div class="imagen-container">
                    <img src="imagenes/morcilla.jpeg" alt="Producto 4" data-price="6.00">
                </div>
                <h3>Morcilla</h3>
                <p>Morcilla fresca</p>
                <div class="precio">6 €/unidad</div>
            </a>
            <div class="cantidad">
                <label for="cantidad4">Unidades:</label>
                <input type="number" id="cantidad4" name="cantidad4" min="1" value="1">
            </div>
            <button onclick="añadirAlCarrito(this)">Añadir al carrito</button>
        </div>

<!-- Se repite toda la estructura con diferentes productos -->

        <div class="producto" data-categoria="vegetales" data-nombre="Judías" data-price="1.99" data-imagen="imagenes/judias.jpeg">
            <a href="producto5.html">
                <div class="imagen-container">
                    <img src="imagenes/judias.jpeg" alt="Producto 5">
                </div>
                <h3>Judías Verdes</h3>
                <p>Judías verdes desde Almería</p>
                <div class="precio">1,99 €/kg</div>
            </a>
            <div class="cantidad">
                <label for="cantidad5">Peso:</label>
                <input type="number" id="cantidad5" name="cantidad5" min="1" value="1">
            </div>
            <button onclick="añadirAlCarrito(this)">Añadir al carrito</button>
        </div>

<!-- Se repite toda la estructura con diferentes productos -->

        <div class="producto" data-categoria="vegetales" data-nombre="Sandía" data-price="1.95" data-imagen="imagenes/sandia.jpeg">
            <a href="producto6.html">
                <div class="imagen-container">
                    <img src="imagenes/sandia.jpeg" alt="Producto 6">
                </div>
                <h3>Sandia</h3>
                <p>Sandía entera</p>
                <div class="precio">1,95 €/kg</div>
            </a>
            <div class="cantidad">
                <label for="cantidad6">Peso: </label>
                <input type="number" id="cantidad6" name="cantidad6" min="1" value="1">
            </div>
            <button onclick="añadirAlCarrito(this)">Añadir al carrito</button>
        </div>

<!-- Se repite toda la estructura con diferentes productos -->

        <div class="producto" data-categoria="pescado" data-nombre="Sepia" data-price="21.42" data-imagen="imagenes/sepia.jpeg">
            <a href="producto7.html">
                <div class="imagen-container">
                    <img src="imagenes/sepia.jpeg" alt="Producto 7">
                </div>
                <h3>Sepia</h3>
                <p>Sepia fresca.</p>
                <div class="precio">21,42€/kg</div>
            </a>
            <div class="cantidad">
                <label for="cantidad7">Peso:</label>
                <input type="number" id="cantidad7" name="cantidad7" min="1" value="1">
            </div>
            <button onclick="añadirAlCarrito(this)">Añadir al carrito</button>
        </div>

<!-- Se repite toda la estructura con diferentes productos -->

        <div class="producto" data-categoria="carne" data-nombre="Jamón ibérico" data-price="16.00" data-imagen="imagenes/jamon.jpg">
            <a href="producto8.html">
                <div class="imagen-container">
                    <img src="imagenes/jamon.jpg" alt="Producto 8">
                </div>
                <h3>Jamón 100% ibérico</h3>
                <p>Jamón ibérico de cebo</p>
                <div class="precio">16€/kg</div>
            </a>
            <div class="cantidad">
                <label for="cantidad8">Peso:</label>
                <input type="number" id="cantidad8" name="cantidad8" min="1" value="1">
            </div>
            <button onclick="añadirAlCarrito(this)">Añadir al carrito</button>
        </div>
    </div>
    <div id="carrito-container" class="carrito-container">
        <div id="carrito-header" class="carrito-header">
            <h2>Carrito</h2>
        </div>
        <div id="carrito"></div>
        <div id="total"><strong>Total: </strong>0,00 €</div>
        <button onclick="guardarCarritoYRedirigir()">Ir al carrito</button>
    </div>



<footer>
    <p>Síguenos en nuestras redes sociales para estar al día: </p> <!--Texto footer-->
    <div class="footer-images"> <!--Imagenes footer-->
        <a href="https://www.x.com" target="_blank"> <!--link twitter-->
            <img src="imagenes/twitter.png" alt="twitter"> <!--imagen twitter-->
        </a>
        <a href="https://www.instagram.com" target="_blank"> <!--link instagram-->
            <img src="imagenes/Instagram.jpeg" alt="Instagram"> <!--imagen instagram-->
        </a>
        <a href="https://www.facebook.com" target="_blank"> <!--link facebook-->
            <img src="imagenes/facebook.png" alt="Facebook"> <!--imagen facebook-->
        </a>
    </div>
</footer>

    <script>

        /*JavaScript*/
        /*orden alfabetico*/
        function ordenarAlfabeticamente() {
            const catalogo = document.querySelector('.catalogo');
            const productos = Array.from(catalogo.children);
            productos.sort((a, b) => {
                const nombreA = a.querySelector('h3').textContent;
                const nombreB = b.querySelector('h3').textContent;
                return nombreA.localeCompare(nombreB);
            });
            catalogo.innerHTML = '';
            productos.forEach(producto => catalogo.appendChild(producto));
        }
/*orden por categoria*/
        function ordenarPorCategoria() {
            const categorias = { vegetales: 1, carne: 2, pescado: 3 };
            const catalogo = document.querySelector('.catalogo');
            const productos = Array.from(catalogo.children);
            productos.sort((a, b) => {
                const categoriaA = categorias[a.dataset.categoria] || 4;
                const categoriaB = categorias[b.dataset.categoria] || 4;
                return categoriaA - categoriaB;
            });
            catalogo.innerHTML = '';
            productos.forEach(producto => catalogo.appendChild(producto));
        }
    
        document.addEventListener("DOMContentLoaded", () => {
    actualizarTotalEmergente();
});

// Añadir producto al carrito emergente
function añadirAlCarrito(boton) {
    const productoElement = boton.closest('.producto');
    const nombre = productoElement.dataset.nombre || productoElement.querySelector('h3').textContent || "Producto sin nombre";
    const precio = parseFloat(productoElement.dataset.price) || 0;
    const imagen = productoElement.dataset.imagen || ""; // Ruta de la imagen
    const cantidadInput = productoElement.querySelector('input[type="number"]');
    const cantidad = parseFloat(cantidadInput.value) || 1; // Permitir valores decimales
    const precioTotal = precio * cantidad;

    if (cantidad <= 0) {
        alert('La cantidad debe ser mayor que 0.');
        return;
    }

    const carritoEmergente = document.getElementById('carrito');
    const itemExistente = carritoEmergente.querySelector(`[data-nombre="${nombre}"]`);

    if (itemExistente) {
        const cantidadActual = parseFloat(itemExistente.querySelector('.cantidad').textContent);
        const nuevaCantidad = cantidadActual + cantidad;
        const nuevoPrecio = (precio * nuevaCantidad).toFixed(2);

        itemExistente.querySelector('.cantidad').textContent = nuevaCantidad;
        itemExistente.querySelector('.precio').textContent = `${nuevoPrecio} €`;
    } else {
        const nuevoItem = document.createElement('div');
        nuevoItem.classList.add('carrito-item');
        nuevoItem.setAttribute('data-nombre', nombre);
        nuevoItem.innerHTML = `
            <img src="${imagen}" alt="${nombre}" style="width: 50px; height: 50px; margin-right: 10px;">
            <span>${nombre}</span>
            <span>
                <span class="cantidad">${cantidad}</span> x ${precio.toFixed(2)} € = 
                <span class="precio">${precioTotal.toFixed(2)} €</span>
            </span>
            <button class="eliminar" onclick="eliminarProductoEmergente(this)">Eliminar</button>
        `;
        carritoEmergente.appendChild(nuevoItem);
    }

    actualizarTotalEmergente();
}

// Actualizar el total en el carrito emergente
function actualizarTotalEmergente() {
    const carritoEmergente = document.getElementById('carrito');
    const totalElement = document.getElementById('total');
    let total = 0;

    carritoEmergente.querySelectorAll('.carrito-item').forEach(item => {
        const precio = parseFloat(item.querySelector('.precio').textContent.replace('€', '').trim());
        total += precio;
    });

    totalElement.textContent = `Total: ${total.toFixed(2)} €`;
}

// Eliminar un producto del carrito emergente
function eliminarProductoEmergente(boton) {
    const productoElement = boton.closest('.carrito-item');
    const carritoEmergente = document.getElementById('carrito');

    // Eliminar el producto del carrito emergente
    carritoEmergente.removeChild(productoElement);

    // Actualizar el total después de eliminar
    actualizarTotalEmergente();
}

// Guardar productos del carrito emergente y redirigir a la página de carrito
function guardarCarritoYRedirigir() {
    const carrito = [];
    const carritoItems = document.querySelectorAll('#carrito .carrito-item');
    carritoItems.forEach(item => {
        const nombre = item.getAttribute('data-nombre');
        const cantidad = parseFloat(item.querySelector('.cantidad').textContent);
        const precioTotal = parseFloat(item.querySelector('.precio').textContent.replace('€', '').trim());
        const imagen = item.querySelector('img').src;

        carrito.push({ nombre, cantidad, precioTotal, imagen });
    });

    localStorage.setItem('carrito', JSON.stringify(carrito));
    window.location.href = 'Carrito.html'; // Redirige a la página de carrito
}

document.addEventListener("DOMContentLoaded", () => {
    const carritoContainer = document.getElementById("carrito-container");
    const carritoHeader = document.getElementById("carrito-header");

    let offsetX = 0; // Diferencia entre el cursor y el borde izquierdo del carrito
    let offsetY = 0; // Diferencia entre el cursor y el borde superior del carrito
    let isDragging = false;

    // Cuando el usuario presiona el mouse sobre el header del carrito
    carritoHeader.addEventListener("mousedown", (e) => {
        isDragging = true;
        offsetX = e.clientX - carritoContainer.offsetLeft;
        offsetY = e.clientY - carritoContainer.offsetTop;
        carritoContainer.style.cursor = "grabbing";
    });

    // Mientras se mueve el mouse
    document.addEventListener("mousemove", (e) => {
        if (isDragging) {
            const newX = e.clientX - offsetX;
            const newY = e.clientY - offsetY;
            carritoContainer.style.left = `${newX}px`;
            carritoContainer.style.top = `${newY}px`;
        }
    });

    // Cuando el usuario suelta el mouse
    document.addEventListener("mouseup", () => {
        isDragging = false;
        carritoContainer.style.cursor = "grab";
    });
});
    </script>
</body>
</html>